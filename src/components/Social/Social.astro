---
import type { SocialProps } from "./Social";

const { platform, username }: SocialProps = Astro.props as SocialProps;
---

<a href={`https://www.${platform}.com/${username}`}>
{
  (
    <>
      <img
        class="w-fit shrink-0 icon dark"
        src={`/icons8-${platform}-light.svg`}
        alt={`${platform}`}
      />
    </>
  )
}
</a>
<script>
  const themeToggle = document.getElementById("themeToggle");
  const icons = document.querySelectorAll(".icon");
  const toggleIcon = () => {
    icons.forEach((e) => {
      const img = e as HTMLImageElement;
      if (localStorage.getItem("theme") === "dark") {
        img.src = img.src.replace("dark", "light");
      } else {
        img.src = img.src.replace("light", "dark");
      }
    });
  };

  themeToggle?.addEventListener("click", toggleIcon);
  document.addEventListener("DOMContentLoaded", toggleIcon);
</script>
